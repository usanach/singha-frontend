const progress = [
    {
        date: '2020-12-30',
        image: [
            './../../../assets/progress/2020-12-30/1.jpg',
            './../../../assets/progress/2020-12-30/2.jpg',
            './../../../assets/progress/2020-12-30/3.jpg',
        ],
        progress: {
            overall: '0.15',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-01-29',
        image: [
            './../../../assets/progress/2021-01-29/1.jpg',
            './../../../assets/progress/2021-01-29/2.jpg',
            './../../../assets/progress/2021-01-29/3.jpg',
        ],
        progress: {
            overall: '1.25',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-02-28',
        image: [
            './../../../assets/progress/2021-02-28/1.jpg',
            './../../../assets/progress/2021-02-28/2.jpg',
            './../../../assets/progress/2021-02-28/3.jpg',
        ],
        progress: {
            overall: '2.53',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-03-31',
        image: [
            './../../../assets/progress/2021-03-31/1.jpg',
            './../../../assets/progress/2021-03-31/2.jpg',
            './../../../assets/progress/2021-03-31/3.jpg',
        ],
        progress: {
            overall: '2.53',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-04-30',
        image: [
            './../../../assets/progress/2021-03-31/1.jpg',
        ],
        progress: {
            overall: '2.53',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-05-31',
        image: [
            './../../../assets/progress/2021-05-31/1.jpg',
            './../../../assets/progress/2021-05-31/2.jpg',
            './../../../assets/progress/2021-05-31/3.jpg',
            './../../../assets/progress/2021-05-31/4.jpg',
        ],
        progress: {
            overall: '3.61',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-06-30',
        image: [
            './../../../assets/progress/2021-06-30/1.jpg',
            './../../../assets/progress/2021-06-30/2.jpg',
            './../../../assets/progress/2021-06-30/3.jpg',
            './../../../assets/progress/2021-06-30/4.jpg',
        ],
        progress: {
            overall: '3.94',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-07-31',
        image: [
            './../../../assets/progress/2021-07-31/1.jpg',
            './../../../assets/progress/2021-07-31/2.jpg',
            './../../../assets/progress/2021-07-31/3.jpg',
            './../../../assets/progress/2021-07-31/4.jpg',
        ],
        progress: {
            overall: '4.10',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-08-31',
        image: [
            './../../../assets/progress/2021-08-31/1.jpg',
            './../../../assets/progress/2021-08-31/2.jpg',
            './../../../assets/progress/2021-08-31/3.jpg',
            './../../../assets/progress/2021-08-31/4.jpg',
            './../../../assets/progress/2021-08-31/5.jpg',
            './../../../assets/progress/2021-08-31/6.jpg',
        ],
        progress: {
            overall: '4.70',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-09-30',
        image: [
            './../../../assets/progress/2021-09-30/1.jpg',
            './../../../assets/progress/2021-09-30/2.jpg',
            './../../../assets/progress/2021-09-30/3.jpg',
            './../../../assets/progress/2021-09-30/4.jpg',
            './../../../assets/progress/2021-09-30/5.jpg',
            './../../../assets/progress/2021-09-30/6.jpg',
        ],
        progress: {
            overall: '4.95',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-10-29',
        image: [
            './../../../assets/progress/2021-10-29/1.jpg',
            './../../../assets/progress/2021-10-29/2.jpg',
        ],
        progress: {
            overall: '5.50',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-11-30',
        image: [
            './../../../assets/progress/2021-11-30/1.jpg',
            './../../../assets/progress/2021-11-30/2.jpg',
            './../../../assets/progress/2021-11-30/3.jpg',
            './../../../assets/progress/2021-11-30/4.jpg',
        ],
        progress: {
            overall: '7.15',
            structure: '71.00',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2021-12-31',
        image: [
            './../../../assets/progress/2021-12-31/1.jpg',
            './../../../assets/progress/2021-12-31/2.jpg',
            './../../../assets/progress/2021-12-31/3.jpg',
            './../../../assets/progress/2021-12-31/4.jpg',
            './../../../assets/progress/2021-12-31/5.jpg',
        ],
        progress: {
            overall: '7.96',
            structure: '78.00',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-01-31',
        image: [
            './../../../assets/progress/2022-01-31/1.jpg',
            './../../../assets/progress/2022-01-31/2.jpg',
            './../../../assets/progress/2022-01-31/3.jpg',
            './../../../assets/progress/2022-01-31/4.jpg',
            './../../../assets/progress/2022-01-31/5.jpg',
        ],
        progress: {
            overall: '8.02',
            structure: '80.00',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-02-28',
        image: [
            './../../../assets/progress/2022-02-28/1.jpg',
            './../../../assets/progress/2022-02-28/2.jpg',
            './../../../assets/progress/2022-02-28/3.jpg',
            './../../../assets/progress/2022-02-28/4.jpg',
            './../../../assets/progress/2022-02-28/5.jpg',
            './../../../assets/progress/2022-02-28/6.jpg',
        ],
        progress: {
            overall: '8.50',
            structure: '100.00',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-03-31',
        image: [
            './../../../assets/progress/2022-03-31/1.jpg',
            './../../../assets/progress/2022-03-31/2.jpg',
            './../../../assets/progress/2022-03-31/3.jpg',
            './../../../assets/progress/2022-03-31/4.jpg',
            './../../../assets/progress/2022-03-31/5.jpg',
            './../../../assets/progress/2022-03-31/6.jpg',
        ],
        progress: {
            overall: '8.50',
            structure: '100.00',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-04-30',
        image: [
            './../../../assets/progress/2022-04-30/1.jpg',
            './../../../assets/progress/2022-04-30/2.jpg',
            './../../../assets/progress/2022-04-30/3.jpg',
            './../../../assets/progress/2022-04-30/4.jpg',
            './../../../assets/progress/2022-04-30/5.jpg',
            './../../../assets/progress/2022-04-30/6.jpg',
        ],
        progress: {
            overall: '8.60',
            structure: '100.00',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-05-31',
        image: [
            './../../../assets/progress/2022-05-31/1.jpg',
            './../../../assets/progress/2022-05-31/2.jpg',
            './../../../assets/progress/2022-05-31/3.jpg',
            './../../../assets/progress/2022-05-31/4.jpg',
            './../../../assets/progress/2022-05-31/5.jpg',
        ],
        progress: {
            overall: '8.60',
            structure: '100.00',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-06-30',
        image: [
            './../../../assets/progress/2022-06-30/1.jpg',
            './../../../assets/progress/2022-06-30/2.jpg',
            './../../../assets/progress/2022-06-30/3.jpg',
            './../../../assets/progress/2022-06-30/4.jpg',
        ],
        progress: {
            overall: '8.60',
            structure: '100.00',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-07-29',
        image: [
            './../../../assets/progress/2022-07-29/1.jpg',
            './../../../assets/progress/2022-07-29/2.jpg',
            './../../../assets/progress/2022-07-29/3.jpg',
            './../../../assets/progress/2022-07-29/4.jpg',
            './../../../assets/progress/2022-07-29/3.jpg',
            './../../../assets/progress/2022-07-29/4.jpg',
        ],
        progress: {
            overall: '8.80',
            structure: '100.00',
            system: '0.30',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-08-31',
        image: [
            './../../../assets/progress/2022-08-31/1.jpg',
            './../../../assets/progress/2022-08-31/2.jpg',
            './../../../assets/progress/2022-08-31/3.jpg',
        ],
        progress: {
            overall: '9.00',
            structure: '',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-09-30',
        image: [
            './../../../assets/progress/2022-09-30/1.jpg',
            './../../../assets/progress/2022-09-30/2.jpg',
            './../../../assets/progress/2022-09-30/3.jpg',
            './../../../assets/progress/2022-09-30/4.jpg',
            './../../../assets/progress/2022-09-30/5.jpg',
            './../../../assets/progress/2022-09-30/6.jpg',
        ],
        progress: {
            overall: '9.30',
            structure: '40.21',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-10-31',
        image: [
            './../../../assets/progress/2022-10-31/1.jpg',
            './../../../assets/progress/2022-10-31/2.jpg',
            './../../../assets/progress/2022-10-31/3.jpg',
            './../../../assets/progress/2022-10-31/4.jpg',
            './../../../assets/progress/2022-10-31/5.jpg',
        ],
        progress: {
            overall: '10.39',
            structure: '46.58',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2022-12-02',
        image: [
            './../../../assets/progress/2022-12-02/1.jpg',
            './../../../assets/progress/2022-12-02/2.jpg',
            './../../../assets/progress/2022-12-02/3.jpg',
            './../../../assets/progress/2022-12-02/4.jpg',
            './../../../assets/progress/2022-12-02/5.jpg',
            './../../../assets/progress/2022-12-02/6.jpg',
        ],
        progress: {
            overall: '10.78',
            structure: '49.64',
            system: '',
            architecture: '',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2023-01-05',
        image: [
            './../../../assets/progress/2023-01-05/1.jpg',
            './../../../assets/progress/2023-01-05/2.jpg',
            './../../../assets/progress/2023-01-05/3.jpg',
            './../../../assets/progress/2023-01-05/4.jpg',
            './../../../assets/progress/2023-01-05/5.jpg',
            './../../../assets/progress/2023-01-05/6.jpg',
        ],
        progress: {
            overall: '12.71',
            structure: '55.90',
            system: '',
            architecture: '1.76',
            facade: '',
            interior: '',
        }
    },
    {
        date: '2023-02-03',
        image: [
            './../../../assets/progress/2023-02-03/1.jpg',
            './../../../assets/progress/2023-02-03/2.jpg',
            './../../../assets/progress/2023-02-03/3.jpg',
            './../../../assets/progress/2023-02-03/4.jpg',
            './../../../assets/progress/2023-02-03/5.jpg',
            './../../../assets/progress/2023-02-03/6.jpg',
        ],
        progress: {
            overall: '14.38',
            structure: '62.89',
            system: '',
            architecture: '8.84',
            facade: '0.75',
            interior: '',
        }
    },
    {
        date: '2023-03-03',
        image: [
            './../../../assets/progress/2023-03-03/1.jpg',
            './../../../assets/progress/2023-03-03/2.jpg',
            './../../../assets/progress/2023-03-03/3.jpg',
            './../../../assets/progress/2023-03-03/4.jpg',
            './../../../assets/progress/2023-03-03/5.jpg',
        ],
        progress: {
            overall: '16.36',
            structure: '70.75',
            system: '',
            architecture: '20.29',
            facade: '2.30',
            interior: '',
        }
    },
    {
        date: '2023-04-03',
        image: [
            './../../../assets/progress/2023-04-03/1.jpg',
            './../../../assets/progress/2023-04-03/2.jpg',
            './../../../assets/progress/2023-04-03/3.jpg',
            './../../../assets/progress/2023-04-03/4.jpg',
            './../../../assets/progress/2023-04-03/5.jpg',
            './../../../assets/progress/2023-04-03/6.jpg',
        ],
        progress: {
            overall: '18.72',
            structure: '76.41',
            system: '23.18',
            architecture: '6.49',
            facade: '3.98',
            interior: '',
        }
    },
    {
        date: '2023-05-03',
        image: [
            './../../../assets/progress/2023-05-03/1.jpg',
            './../../../assets/progress/2023-05-03/2.jpg',
        ],
        progress: {
            overall: '21.28',
            structure: '79.82',
            system: '10.61',
            architecture: '25.25',
            facade: '9.38',
            interior: '',
        }
    },
    {
        date: '2023-06-26',
        image: [
            './../../../assets/progress/2023-06-26/1.jpg',
            './../../../assets/progress/2023-06-26/2.jpg',
            './../../../assets/progress/2023-06-26/3.jpg',
        ],
        progress: {
            overall: '31.13',
            structure: '86.57',
            system: '24.67',
            architecture: '36.35',
            facade: '',
            interior: '34.92',
        }
    },
    {
        date: '2023-08-04',
        image: [
            './../../../assets/progress/2023-08-04/1.jpg',
            './../../../assets/progress/2023-08-04/2.jpg',
            './../../../assets/progress/2023-08-04/3.jpg',
            './../../../assets/progress/2023-08-04/4.jpg',
        ],
        progress: {
            overall: '39.52',
            structure: '91.94',
            system: '37.27',
            architecture: '43.45',
            facade: '37.05',
            interior: '',
        }
    },
    {
        date: '2023-09-08',
        image: [
            './../../../assets/progress/2023-09-08/1.jpg',
            './../../../assets/progress/2023-09-08/2.jpg',
            './../../../assets/progress/2023-09-08/3.jpg',
            './../../../assets/progress/2023-09-08/4.jpg',
            './../../../assets/progress/2023-09-08/5.jpg',
        ],
        progress: {
            overall: '42.95',
            structure: '93.49',
            system: '38.09',
            architecture: '47.49',
            facade: '43.53',
            interior: '41.83',
        }
    },
    {
        date: '2023-10-05',
        image: [
            './../../../assets/progress/2023-10-05/1.jpg',
            './../../../assets/progress/2023-10-05/2.jpg',
            './../../../assets/progress/2023-10-05/3.jpg',
        ],
        progress: {
            overall: '50.56',
            structure: '98.93',
            system: '44.92',
            architecture: '52.88',
            facade: '49.29',
            interior: '47.37',
        }
    },
    {
        date: '2023-11-14',
        image: [
            './../../../assets/progress/2023-11-14/1.jpg',
            './../../../assets/progress/2023-11-14/2.jpg',
            './../../../assets/progress/2023-11-14/3.jpg',
            './../../../assets/progress/2023-11-14/4.jpg',
        ],
        progress: {
            overall: '55.52',
            structure: '99.43',
            system: '47.25',
            architecture: '60.49',
            facade: '58.67',
            interior: '56.66',
        }
    },
    {
        date: '2023-12-12',
        image: [
            './../../../assets/progress/2023-12-12/1.jpg',
            './../../../assets/progress/2023-12-12/2.jpg',
            './../../../assets/progress/2023-12-12/3.jpg',
        ],
        progress: {
            overall: '62.12',
            structure: '99.78',
            system: '55.80',
            architecture: '68.84',
            facade: '73.79',
            interior: '63.81',
        }
    },
    {
        date: '2024-01-25',
        image: [
            './../../../assets/progress/2024-01-25/1.jpg',
            './../../../assets/progress/2024-01-25/2.jpg',
            './../../../assets/progress/2024-01-25/3.jpg',
            './../../../assets/progress/2024-01-25/4.jpg',
        ],
        progress: {
            overall: '78.85',
            structure: '99.62',
            system: '84.22',
            architecture: '90.87',
            facade: '85.76',
            interior: '',
        }
    },
    {
        date: '2024-02-25',
        image: [
            './../../../assets/progress/2024-02-25/1.jpg',
            './../../../assets/progress/2024-02-25/2.jpg',
            './../../../assets/progress/2024-02-25/3.jpg',
            './../../../assets/progress/2024-02-25/4.jpg',
        ],
        progress: {
            overall: '86.44',
            structure: '99.62',
            system: '88.50',
            architecture: '93.03',
            facade: '87.72',
            interior: '',
        }
    },
    {
        date: '2024-04-23',
        image: [
            './../../../assets/progress/2024-04-23/1.jpg',
            './../../../assets/progress/2024-04-23/2.jpg',
            './../../../assets/progress/2024-04-23/3.jpg',
            './../../../assets/progress/2024-04-23/4.jpg',
        ],
        progress: {
            overall: '88.52',
            structure: '99.84',
            system: '93.27',
            architecture: '95.35',
            facade: '93.42',
            interior: '87.70',
        }
    },
    {
        date: '2024-05-02',
        image: [
            './../../../assets/progress/2024-05-02/1.jpg',
            './../../../assets/progress/2024-05-02/2.jpg',
            './../../../assets/progress/2024-05-02/3.jpg',
            './../../../assets/progress/2024-05-02/4.jpg',
            './../../../assets/progress/2024-05-02/5.jpg',
            './../../../assets/progress/2024-05-02/6.jpg',
        ],
        progress: {
            overall: '90.05',
            structure: '99.84',
            system: '93.27',
            architecture: '96.15',
            facade: '93.42',
            interior: '88.86',
        }
    },
    {
        date: '2024-06-12',
        image: [
            './../../../assets/progress/2024-06-12/1.jpg',
            './../../../assets/progress/2024-06-12/2.jpg',
            './../../../assets/progress/2024-06-12/3.jpg',
            './../../../assets/progress/2024-06-12/4.jpg',
            './../../../assets/progress/2024-06-12/5.jpg',
            './../../../assets/progress/2024-06-12/6.jpg',
        ],
        progress: {
            overall: '97.05',
            structure: '100.00',
            system: '97.27',
            architecture: '98.00',
            facade: '100.00',
            interior: '95.86',
        }
    },
];


let sortedProgress;
let gallerySlider;
let swiperThumbs;
let gallerySliderDesktop;
let swiperThumbsDesktop;

document.addEventListener('DOMContentLoaded', () => {
    sortedProgress = progress.sort((a, b) => new Date(b.date) - new Date(a.date));

    function formatDate(dateString) {
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        return new Date(dateString).toLocaleDateString('en-US', options);
    }

    function formatDateNoDay(dateString) {
        const options = { year: 'numeric', month: 'long'};
        return new Date(dateString).toLocaleDateString('en-US', options);
    }

    const firstData = sortedProgress[0];
    updateContent(firstData);

    function initializeSwipers() {
        swiperThumbs = new Swiper('#swiper6progress-thumbs', {
            spaceBetween: 10,
            slidesPerView: 3,
            freeMode: true,
            watchSlidesVisibility: true,
            watchSlidesProgress: true,
        });

        gallerySlider = new Swiper('#swiper6progress-slider', {
            spaceBetween: 10,
            slidesPerView: 1,
            loop: true,
            navigation: {
                nextEl: '.swiper-thumb-wrapper.is-mobile .button-next',
                prevEl: '.swiper-thumb-wrapper.is-mobile .button-prev',
            },
            thumbs: {
                swiper: swiperThumbs,
            },
            on: {
                init: function () {
                    updateProgress2(this);
                },
                slideChange: function () {
                    updateProgress2(this);
                }
            }
        });

        swiperThumbsDesktop = new Swiper('#swiper5progress-thumbs', {
            spaceBetween: 10,
            slidesPerView: 3,
            freeMode: true,
            watchSlidesVisibility: true,
            watchSlidesProgress: true,
        });

        gallerySliderDesktop = new Swiper('#swiper5progress-slider', {
            spaceBetween: 10,
            slidesPerView: 1,
            loop: true,
            navigation: {
                nextEl: '.swiper-thumb-wrapper.is-mobile-hide .button-next',
                prevEl: '.swiper-thumb-wrapper.is-mobile-hide .button-prev',
            },
            thumbs: {
                swiper: swiperThumbsDesktop,
            },
            on: {
                init: function () {
                    updateProgress1(this);
                },
                slideChange: function () {
                    updateProgress1(this);
                }
            }
        });
    }

    function destroySwipers() {
        if (swiperThumbs) swiperThumbs.destroy(true, true);
        if (gallerySlider) gallerySlider.destroy(true, true);
        if (swiperThumbsDesktop) swiperThumbsDesktop.destroy(true, true);
        if (gallerySliderDesktop) gallerySliderDesktop.destroy(true, true);
    }

    function updateContent(selectedData) {
        document.querySelector('.progress-bar-show-all-text').textContent = `${selectedData.progress.overall}%`;
        const progressBars = document.querySelectorAll('.progress-bar-wrap');
        const progressLabels = ['structure', 'system', 'architecture', 'facade', 'interior'];
        progressLabels.forEach((label, index) => {
            const bar = progressBars[index];
            if (bar) {
                const progressNumberElement = bar.querySelector('.progress-process-number');
                const progressBarElement = bar.querySelector('.progress-fill');
                const value = selectedData.progress[label] || '0%';

                if (value === '0%' || value === '') {
                    bar.style.display = 'none';
                } else {
                    bar.style.display = 'block';
                    if (progressNumberElement) {
                        if (value == 100) {
                            
                            const intValue = Math.floor(value); 
                            progressNumberElement.textContent = `${intValue}%`;
                        } else {
                            progressNumberElement.textContent = `${value}%`;
                        }
                    }
                    if (progressBarElement) {
                        const progressValue = parseFloat(value.replace('%', ''));
                        progressBarElement.style.width = `${progressValue}%`;
                    }
                }
            }
        });

        const updateHeaderText = document.querySelector('.update-header-text');

        if (updateHeaderText) {
            updateHeaderText.textContent = 'Updated On ' + formatDateNoDay(selectedData.date);
        }

        const sliderWrapper = document.getElementById('swiper6progress-slider').querySelector('.swiper-wrapper');
        const thumbsWrapper = document.getElementById('swiper6progress-thumbs').querySelector('.swiper-wrapper');
        const sliderWrapperDesktop = document.getElementById('swiper5progress-slider').querySelector('.swiper-wrapper');
        const thumbsWrapperDesktop = document.getElementById('swiper5progress-thumbs').querySelector('.swiper-wrapper');

        sliderWrapper.innerHTML = '';
        thumbsWrapper.innerHTML = '';
        sliderWrapperDesktop.innerHTML = '';
        thumbsWrapperDesktop.innerHTML = '';

        selectedData.image.forEach((src) => {
            const slide = document.createElement('div');
            slide.className = 'swiper-slide';
            slide.innerHTML = `<img src="${src}" alt="">`;
            sliderWrapper.appendChild((slide.cloneNode(true)));
            sliderWrapperDesktop.appendChild(slide.cloneNode(true));

            const thumb = document.createElement('div');
            thumb.className = 'swiper-slide';
            thumb.innerHTML = `<img src="${src}" alt="">`;
            thumbsWrapper.appendChild(thumb.cloneNode(true));
            thumbsWrapperDesktop.appendChild(thumb.cloneNode(true));
        });
        destroySwipers();
        initializeSwipers();
        updateProgress2(gallerySlider);
        updateProgress1(gallerySliderDesktop);
    }

    initializeSwipers();

    const dateDropdown = document.getElementById('progress-date-dropdown');
    const updateHeaderText = document.querySelector('.update-header-text');
    const selectedDateBox = document.getElementById('selected-date');
    const dateList = document.getElementById('date-list');

    function formatDate(dateString) {
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        return new Date(dateString).toLocaleDateString('en-US', options);
    }

    function formatDate2(dateString) {
        const options = { year: 'numeric', month: 'long' };
        return new Date(dateString).toLocaleDateString('en-US', options);
    }

    progress.forEach(item => {
        const option = document.createElement('option');
        option.value = item.date;
        option.textContent = formatDate2(item.date); 
        dateDropdown.appendChild(option);

        const listItem = document.createElement('li');
        listItem.textContent = formatDate2(item.date); 
        listItem.setAttribute('data-value', item.date);
        dateList.appendChild(listItem);

        const latestDate = sortedProgress[0].date;
        const initlatestDate = formatDate(latestDate);
        selectedDateBox.innerHTML= `${initlatestDate}`;
    });

    selectedDateBox.addEventListener('click', () => {
        dateList.classList.toggle('show');
    });

    dateList.addEventListener('click', (event) => {
        const clickedItem = event.target;
        if (clickedItem.tagName === 'LI') {
            const selectedDate = clickedItem.getAttribute('data-value');
            selectedDateBox.textContent = clickedItem.textContent;
            dateDropdown.value = selectedDate;
            dateList.classList.remove('show');

            const selectedData = sortedProgress.find(entry => entry.date === selectedDate);
            updateContent(selectedData);

        }
    });

    document.addEventListener('click', (event) => {
        if (!event.target.closest('.custom-dropdown')) {
            dateList.classList.remove('show');
        }
    });

// ===========================================================

    const progressButton = document.querySelector('.progress-bar-button-text');
    const swiperThumbWrapper = document.querySelector('.swiper-thumb-wrapper');
    const updateDescDetail = document.querySelector('.update-desc-detail');
    const progressBars = document.querySelectorAll('.progress-bar-wrap');
    const visibleBars = Array.from(progressBars).filter(bar => getComputedStyle(bar).display === 'block');

    if (progressButton && swiperThumbWrapper && updateDescDetail) {
        progressButton.addEventListener('click', function () {
            progressButton.classList.toggle('active');
            swiperThumbWrapper.classList.toggle('active');

            if (visibleBars.length <= 2) {
                updateDescDetail.classList.add('active')
            } else {
                updateDescDetail.classList.toggle('active');
            }

            if (progressButton.classList.contains('active')) {
                progressButton.innerHTML = 'Minimize <img src="../../../assets/image-extro/btn-open-icon.svg" alt="arrow" />';
            } else {
                progressButton.innerHTML = 'PROGRESS PICTURE <img src="../../../assets/image-extro/btn-open-icon.svg" alt="arrow" />';
            }
        });
    }

    const button = document.getElementById('progress-bar2');
    const swiperWrapper = document.querySelector('.swiper-thumb-wrapper.is-mobile');
    const detailMobile = document.getElementById('detail-mobile');

    button.addEventListener('click', function () {
        button.classList.toggle('active');
        swiperWrapper.classList.toggle('active');
        detailMobile.classList.toggle('active');

        if (button.classList.contains('active')) {
            button.innerHTML = 'Minimize <img src="../../../assets/image-extro/btn-open-icon.svg" alt="arrow" />';
        } else {
            button.innerHTML = 'PROGRESS PICTURE <img src="../../../assets/image-extro/btn-open-icon.svg" alt="arrow" />';
        }
    });

    window.addEventListener('resize', updateDescDetailVisibility);
});

function updateProgress1(swiper) {
    const currentIndex = swiper.realIndex + 1;
    const totalSlides = swiper.slides.length;
    document.getElementById('peg').textContent = `${currentIndex}/${totalSlides}`;
}

function updateProgress2(swiper) {
    const currentIndex = swiper.realIndex + 1;
    const totalSlides = swiper.slides.length;
    document.getElementById('peg2').textContent = `${currentIndex}/${totalSlides}`;
}

function updateDescDetailVisibility() {
    const progressBars = document.querySelectorAll('.progress-bar-wrap');
    const visibleBars = Array.from(progressBars).filter(bar => getComputedStyle(bar).display === 'block');

    const updateDescDetail = document.querySelector('.update-desc-detail');
    const detailMobile = document.getElementById('detail-mobile');
    const button = document.getElementById('progress-bar2');


    if (visibleBars.length <= 2 && (window.screen.width > 1024 || window.innerWidth > 1024)) {
        updateDescDetail.classList.add('active');
        detailMobile.classList.remove('active');
    } else {
        updateDescDetail.classList.remove('active');
        detailMobile.classList.remove('active');
    }

    if ((window.screen.width <= 1024 || window.innerWidth <= 1024)) {
        if (document.querySelector('.swiper-thumb-wrapper.is-mobile')) {
            const swiperWrapper = document.querySelector('.swiper-thumb-wrapper.is-mobile');
            if (swiperWrapper.classList.contains('active')) {
                swiperWrapper.remove('active');
            }
            if (button.classList.contains('active')) {
                button.classList.remove('active');
                button.innerHTML = 'PROGRESS PICTURE <img src="../../../assets/image-extro/btn-open-icon.svg" alt="arrow" />';
            }
        }

    }
}